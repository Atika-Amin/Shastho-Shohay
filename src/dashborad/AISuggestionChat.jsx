import React, { useEffect, useMemo, useRef, useState } from "react";
import { useNavigate } from "react-router-dom";

/** Professional, full-page AI chat for symptom suggestions */
export default function AISuggestionChatPage() {
  const navigate = useNavigate();

  // ---------------- State ----------------
  const [messages, setMessages] = useState([
    {
      id: "sys-welcome",
      role: "system",
      time: Date.now() - 1000 * 60 * 5,
      content:
        "‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ! ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶â‡¶™‡¶∏‡¶∞‡ßç‡¶ó ‡¶¨‡ßÅ‡¶ù‡ßá ‡¶∏‡¶Æ‡ßç‡¶≠‡¶æ‡¶¨‡ßç‡¶Ø ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶ì ‡¶ï‡¶∞‡¶£‡ßÄ‡ßü ‡¶∏‡¶æ‡¶ú‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶¨‡ßã‡•§ ‡¶Æ‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá‡¶®‚Äî‡¶è‡¶ü‡¶ø ‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂ ‡¶®‡ßü‡•§",
    },
  ]);
  const [input, setInput] = useState("");
  const [isTyping, setIsTyping] = useState(false);
  const [error, setError] = useState("");
  const [attached, setAttached] = useState(null); // { name, size } (demo)
  const endRef = useRef(null);
  const fileInputRef = useRef(null);

  const quickPrompts = useMemo(
    () => [
      "‡¶¨‡ßÅ‡¶ï‡ßá ‡¶ö‡¶æ‡¶™ ‡¶ì ‡¶∂‡ßç‡¶¨‡¶æ‡¶∏‡¶ï‡¶∑‡ßç‡¶ü",
      "‡¶ú‡ßç‡¶¨‡¶∞ ‡ß© ‡¶¶‡¶ø‡¶®, ‡¶ó‡¶≤‡¶æ ‡¶¨‡ßç‡¶Ø‡¶•‡¶æ",
      "‡¶Æ‡¶æ‡¶•‡¶æ ‡¶ò‡ßã‡¶∞‡¶æ ‡¶ì ‡¶¨‡¶Æ‡¶ø‡¶≠‡¶æ‡¶¨",
      "‡¶ï‡¶æ‡¶∂‡¶ø ‡¶ì ‡¶¨‡ßÅ‡¶ï ‡¶ú‡ßç‡¶¨‡¶æ‡¶≤‡¶æ",
    ],
    []
  );

  // -------------- Effects --------------
  useEffect(() => {
    const to = setTimeout(
      () => endRef.current?.scrollIntoView({ behavior: "smooth" }),
      40
    );
    return () => clearTimeout(to);
  }, []);
  useEffect(() => {
    endRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages, isTyping]);

  // -------------- Helpers --------------
  const formatTime = (ts) =>
    new Date(ts).toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });

  const groupByDay = useMemo(() => {
    const days = [];
    let current = null;
    for (const m of messages) {
      const d = new Date(m.time);
      const key = d.toLocaleDateString("bn-BD", {
        year: "numeric",
        month: "long",
        day: "2-digit",
      });
      if (!current || current.label !== key) {
        current = { label: key, items: [] };
        days.push(current);
      }
      current.items.push(m);
    }
    return days;
  }, [messages]);

  const emergencyRegex = /(‡¶π‡¶æ‡¶∞‡ßç‡¶ü|‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶ï|‡¶Ö‡¶ú‡ßç‡¶û‡¶æ‡¶®|‡¶∂‡ßç‡¶¨‡¶æ‡¶∏‡¶ï‡¶∑‡ßç‡¶ü|‡¶¨‡ßÅ‡¶ï‡ßá ‡¶ö‡¶æ‡¶™)/i;

  // -------------- Actions --------------
  const onSend = (text) => {
    const trimmed = (text ?? input).trim();
    if (!trimmed) return;
    setError("");
    const now = Date.now();

    setMessages((prev) => [
      ...prev,
      { id: crypto.randomUUID(), role: "user", time: now, content: trimmed },
    ]);
    setInput("");
    setIsTyping(true);

    // Simulate AI (replace with real API later)
    const flagged = emergencyRegex.test(trimmed);
    setTimeout(() => {
      const blocks = [
        makeSummaryCard(),
        ...(flagged ? [makeRedFlagCard()] : []),
        makeNextStepsCard(),
        makeTabbedAdviceCard(),
        makeDoctorsCard(),
      ];
      setMessages((prev) => [
        ...prev,
        {
          id: crypto.randomUUID(),
          role: "ai",
          time: Date.now(),
          type: "cards",
          blocks,
        },
      ]);
      setIsTyping(false);
    }, 900);
  };

  const onAttachPick = () => fileInputRef.current?.click();
  const onAttachFile = (e) => {
    const file = e.target.files?.[0];
    if (!file) return;
    setAttached({ name: file.name, size: file.size });
  };
  const onRemoveAttach = () => setAttached(null);

  const charCount = input.length;
  const maxChars = 1000;
  const charsLeft = Math.max(0, maxChars - charCount);
  const sendDisabled = !input.trim() || charCount > maxChars;

  // -------------- Render --------------
  return (
    <div className="min-h-screen flex flex-col bg-gradient-to-b from-[#1878A9] via-[#306C8E] to-[#005076]">
      {/* Header */}
      <header className="sticky top-0 z-40 bg-blue-900/95 backdrop-blur text-white border-b border-white/10">
        <div className="mx-auto max-w-6xl h-16 px-4 sm:px-6 lg:px-8 flex items-center justify-between">
          <div className="flex items-center gap-2">
            <button
              onClick={() => navigate(-1)}
              className="px-2 py-1 rounded hover:bg-blue-800"
              aria-label="‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®"
              title="‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®"
            >
              ‚¨ÖÔ∏è
            </button>
            <div>
              <div className="font-semibold leading-5">AI ‡¶â‡¶™‡¶∏‡¶∞‡ßç‡¶ó ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ</div>
              <div className="text-[12px] text-blue-100">
                ‡¶§‡¶•‡ßç‡¶Ø ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶∏‡¶π‡¶æ‡ßü‡¶ï; ‡¶è‡¶ü‡¶ø ‡¶°‡¶æ‡¶ï‡ßç‡¶§‡¶æ‡¶∞‡¶ø ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂ ‡¶®‡ßü‡•§
              </div>
            </div>
          </div>
          <div className="flex items-center gap-2">
            <button
              onClick={() => alert("‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ï‡¶≤ UI (‡¶°‡ßá‡¶Æ‡ßã)")}
              className="text-xs sm:text-sm px-3 py-1.5 rounded bg-blue-500 hover:bg-blue-600"
            >
              üë®‚Äç‚öïÔ∏è ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ï‡¶≤
            </button>
            <button
              onClick={() => navigate("/emergency")}
              className="text-xs sm:text-sm px-3 py-1.5 rounded bg-red-600 hover:bg-red-700"
            >
              üö® ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡¶§‡¶æ
            </button>
          </div>
        </div>
      </header>

      {/* Chat shell */}
      <main className="flex-1 px-3 sm:px-4">
        <div className="mx-auto max-w-3xl my-4 sm:my-6 bg-white/85 backdrop-blur rounded-none sm:rounded-2xl shadow-xl border border-white/30">
          {/* Quick prompts */}
          <div className="px-4 sm:px-5 py-3 bg-gray-50 border-b border-gray-200 rounded-t-2xl">
            <div className="flex flex-wrap gap-2">
              {quickPrompts.map((q) => (
                <button
                  key={q}
                  onClick={() => onSend(q)}
                  className="text-sm px-3 py-1 rounded-full bg-white border border-gray-200 hover:bg-gray-100"
                >
                  {q}
                </button>
              ))}
              <button
                onClick={onAttachPick}
                className="ml-auto text-sm px-3 py-1 rounded-full bg-white border border-gray-200 hover:bg-gray-100"
              >
                üìé ‡¶™‡ßç‡¶∞‡ßá‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® / ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü
              </button>
              <input
                ref={fileInputRef}
                onChange={onAttachFile}
                type="file"
                className="hidden"
              />
            </div>
            {attached && (
              <div className="mt-2 flex items-center gap-3 text-sm">
                <span className="px-2 py-1 rounded bg-blue-50 text-blue-700">
                  {attached.name} ({Math.round(attached.size / 1024)} KB)
                </span>
                <button
                  onClick={onRemoveAttach}
                  className="text-red-600 hover:underline"
                >
                  ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®
                </button>
              </div>
            )}
          </div>

          {/* Error toast */}
          {error && (
            <div className="mx-4 mt-3 rounded-lg border border-red-200 bg-red-50 text-red-700 px-3 py-2 text-sm">
              {error}
            </div>
          )}

          {/* Messages */}
          <div
            className="px-4 sm:px-5 py-4 bg-gray-50 rounded-b-none sm:rounded-b-2xl overflow-y-auto"
            style={{ height: "min(70vh, 560px)" }}
            aria-live="polite"
          >
            {/* Day groups */}
            {groupByDay.map((day) => (
              <div key={day.label} className="mb-5">
                <DaySeparator label={day.label} />
                {day.items.map((m) =>
                  m.role === "system" ? (
                    <SystemNotice
                      key={m.id}
                      time={formatTime(m.time)}
                      text={m.content}
                    />
                  ) : m.role === "user" ? (
                    <UserBubble
                      key={m.id}
                      time={formatTime(m.time)}
                      text={m.content}
                    />
                  ) : m.type === "cards" ? (
                    <AIBubble key={m.id} time={formatTime(m.time)}>
                      {m.blocks.map((b, i) => (
                        <div key={b?.key || i} className="mb-3 last:mb-0">
                          {b}
                        </div>
                      ))}
                    </AIBubble>
                  ) : (
                    <AIBubble key={m.id} time={formatTime(m.time)}>
                      <p className="text-sm text-gray-800">{m.content}</p>
                    </AIBubble>
                  )
                )}

                {/* Typing */}
                {isTyping && (
                  <AIBubble time="">
                    <TypingDots />
                  </AIBubble>
                )}
              </div>
            ))}

            <div ref={endRef} />
          </div>

          {/* Input */}
          <div className="border-t border-gray-200 p-3 bg-white rounded-b-2xl">
            <div className="flex items-end gap-2">
              <textarea
                value={input}
                onChange={(e) => setInput(e.target.value)}
                rows={1}
                maxLength={2000}
                placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶â‡¶™‡¶∏‡¶∞‡ßç‡¶ó ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‚Ä¶"
                aria-label="‡¶â‡¶™‡¶∏‡¶∞‡ßç‡¶ó ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ"
                className="flex-1 resize-none rounded-xl border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#1878A9]"
                onKeyDown={(e) => {
                  if (e.key === "Enter" && !e.shiftKey) {
                    e.preventDefault();
                    if (!sendDisabled) onSend();
                  }
                }}
              />
              <button
                onClick={() => alert("‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü UI (‡¶°‡ßá‡¶Æ‡ßã)")}
                className="px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200"
                aria-label="‡¶≠‡¶Ø‡¶º‡ßá‡¶∏"
                title="‡¶≠‡¶Ø‡¶º‡ßá‡¶∏"
              >
                üéôÔ∏è
              </button>
              <button
                onClick={() => onSend()}
                disabled={sendDisabled}
                className={`px-4 py-2 rounded-lg text-white ${
                  sendDisabled
                    ? "bg-blue-300 cursor-not-allowed"
                    : "bg-blue-700 hover:bg-blue-800"
                }`}
                aria-label="‡¶™‡¶æ‡¶†‡¶æ‡¶®"
                title="‡¶™‡¶æ‡¶†‡¶æ‡¶®"
              >
                ‡¶™‡¶æ‡¶†‡¶æ‡¶®
              </button>
            </div>
            <div className="mt-1 flex items-center justify-between">
              <p className="text-[11px] text-gray-500">
                ‚ö†Ô∏è ‡¶§‡ßÄ‡¶¨‡ßç‡¶∞ ‡¶¨‡ßÅ‡¶ï‡ßá ‡¶¨‡ßç‡¶Ø‡¶•‡¶æ, ‡¶†‡¶æ‡¶®‡ßç‡¶°‡¶æ ‡¶ò‡¶æ‡¶Æ, ‡¶¨‡¶æ ‡¶∂‡ßç‡¶¨‡¶æ‡¶∏‡¶ï‡¶∑‡ßç‡¶ü ‡¶π‡¶≤‡ßá ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∏‡¶π‡¶æ‡ßü‡¶§‡¶æ
                ‡¶®‡¶ø‡¶®‡•§
              </p>
              <span className="text-[11px] text-gray-500">
                {charsLeft} ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞ ‡¶¨‡¶æ‡¶ï‡¶ø
              </span>
            </div>
          </div>
        </div>
      </main>

      {/* Footer */}
      <footer className="bg-blue-900 text-white text-center text-sm py-3">
        ¬© ‡ß®‡ß¶‡ß®‡ß´ ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø‡¶∏‡¶π‡¶æ‡ßü | ‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶ï‡ßá‡¶¨‡¶≤ ‡¶∏‡¶π‡¶æ‡ßü‡¶ï ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡•§ ‡¶∏‡¶†‡¶ø‡¶ï
        ‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶∞‡ßç‡¶¨‡¶¶‡¶æ ‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶ø‡¶§ ‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶ï‡ßá‡¶∞ ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂ ‡¶®‡¶ø‡¶®‡•§
      </footer>
    </div>
  );
}

/* ---------------- Presentational Components ---------------- */

function DaySeparator({ label }) {
  return (
    <div className="relative my-3 text-center">
      <span className="inline-block bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full border border-gray-200 shadow-sm">
        {label}
      </span>
    </div>
  );
}

function SystemNotice({ text, time }) {
  return (
    <div className="mb-3 flex justify-center">
      <div className="max-w-[90%]">
        <div className="rounded-xl bg-blue-50 border border-blue-100 px-3 py-2 text-xs text-blue-900 text-center shadow-sm">
          {text}
        </div>
        {time && (
          <div className="text-[11px] text-center text-gray-500 mt-1">
            {time}
          </div>
        )}
      </div>
    </div>
  );
}

function UserBubble({ text, time }) {
  return (
    <div className="mb-3 flex justify-end">
      <div className="max-w-[75%] text-right">
        <div className="flex items-start justify-end gap-2">
          <div className="rounded-2xl bg-blue-700 text-white px-4 py-2 shadow text-left">
            <p className="text-sm whitespace-pre-wrap">{text}</p>
          </div>
          <div
            className="h-8 w-8 rounded-full ring-2 ring-blue-500 overflow-hidden select-none flex items-center justify-center bg-blue-100 text-blue-700 font-semibold"
            aria-hidden
          >
            ‡¶Ü‡¶™‡¶®‡¶ø
          </div>
        </div>
        <div className="text-[11px] text-gray-500 mt-1">{time}</div>
      </div>
    </div>
  );
}

function AIBubble({ children, time }) {
  return (
    <div className="mb-3 flex justify-start">
      <div className="max-w-[80%]">
        <div className="flex items-start gap-2">
          <div
            className="h-8 w-8 rounded-full ring-2 ring-blue-500 overflow-hidden select-none flex items-center justify-center bg-white"
            aria-hidden
            title="AI ‡¶∏‡¶π‡¶æ‡ßü‡¶§‡¶æ"
          >
            ü©∫
          </div>
          <div className="rounded-2xl bg-white border border-gray-200 px-4 py-3 shadow-sm">
            {children}
          </div>
        </div>
        {time && <div className="text-[11px] text-gray-500 mt-1">{time}</div>}
      </div>
    </div>
  );
}

function TypingDots() {
  return (
    <div className="flex items-center gap-1 text-[#1878A9] px-1 py-0.5">
      <span className="animate-bounce">‚Ä¢</span>
      <span className="animate-bounce [animation-delay:0.1s]">‚Ä¢</span>
      <span className="animate-bounce [animation-delay:0.2s]">‚Ä¢</span>
    </div>
  );
}

/* ---------------- Reusable Card Primitives ---------------- */

function Card({ title, children }) {
  return (
    <div className="rounded-xl border border-gray-200 bg-white shadow-sm">
      {title && (
        <div className="px-3 py-2 border-b border-gray-100 font-medium text-gray-900">
          {title}
        </div>
      )}
      <div className="px-3 py-3">{children}</div>
    </div>
  );
}

function Pill({ children, tone = "default" }) {
  const toneMap = {
    default: "bg-blue-50 text-blue-700",
    warn: "bg-orange-50 text-orange-700",
    danger: "bg-red-50 text-red-700",
    success: "bg-green-50 text-green-700",
  };
  return (
    <span
      className={`text-xs px-2 py-1 rounded-full ${
        toneMap[tone] || toneMap.default
      }`}
    >
      {children}
    </span>
  );
}

/* ---------------- AI Card Builders (Demo UI) ---------------- */

function makeSummaryCard() {
  return (
    <Card key="summary" title="üìã ‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£">
      <div className="flex flex-wrap gap-2 mb-2">
        <Pill>‡¶∏‡¶Æ‡ßç‡¶≠‡¶æ‡¶¨‡ßç‡¶Ø: ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∏‡¶ø‡¶°‡¶ø‡¶ü‡¶ø</Pill>
        <Pill>‡¶∏‡¶Æ‡ßç‡¶≠‡¶æ‡¶¨‡ßç‡¶Ø: ‡¶è‡¶û‡ßç‡¶ú‡¶æ‡¶á‡¶®‡¶æ</Pill>
        <Pill>‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶æ‡¶∏‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø‡¶§‡¶æ: ‡¶Æ‡¶æ‡¶ù‡¶æ‡¶∞‡¶ø</Pill>
      </div>
      <p className="text-sm text-gray-700">
        ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶≤‡¶ï‡ßç‡¶∑‡¶£‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∏‡¶ø‡¶°‡¶ø‡¶ü‡¶ø ‡¶¨‡¶æ ‡¶è‡¶û‡ßç‡¶ú‡¶æ‡¶á‡¶®‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Æ‡¶ø‡¶≤ ‡¶•‡¶æ‡¶ï‡¶§‡ßá
        ‡¶™‡¶æ‡¶∞‡ßá‡•§ ‡¶è‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶¶‡¶ø‡¶ï‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ‚Äî‡¶∏‡ßÅ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶∞‡ßã‡¶ó‡¶®‡¶ø‡¶∞‡ßç‡¶£‡ßü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶°‡¶æ‡¶ï‡ßç‡¶§‡¶æ‡¶∞‡ßá‡¶∞
        ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂ ‡¶®‡¶ø‡¶®‡•§
      </p>
    </Card>
  );
}

function makeRedFlagCard() {
  return (
    <Card key="redflags" title="‚ö†Ô∏è ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ">
      <div className="text-sm text-red-700">
        ‡¶§‡ßÄ‡¶¨‡ßç‡¶∞, ‡¶ö‡ßá‡¶™‡ßá ‡¶ß‡¶∞‡¶æ‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶¨‡ßÅ‡¶ï‡ßá ‡¶¨‡ßç‡¶Ø‡¶•‡¶æ, ‡¶†‡¶æ‡¶®‡ßç‡¶°‡¶æ ‡¶ò‡¶æ‡¶Æ, ‡¶¨‡¶Æ‡¶ø ‡¶¨‡¶Æ‡¶ø ‡¶≠‡¶æ‡¶¨ ‡¶¨‡¶æ ‡¶∂‡ßç‡¶¨‡¶æ‡¶∏‡¶ï‡¶∑‡ßç‡¶ü
        ‡¶¨‡¶æ‡¶°‡¶º‡¶≤‡ßá ‡¶§‡¶æ‡ßé‡¶ï‡ßç‡¶∑‡¶£‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá{" "}
        <span className="font-semibold">‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡¶§‡¶æ</span> ‡¶®‡¶ø‡¶®‡•§
      </div>
    </Card>
  );
}

function makeNextStepsCard() {
  return (
    <Card key="nextsteps" title="‚úÖ ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ï‡¶∞‡¶£‡ßÄ‡ßü">
      <ul className="text-sm text-gray-700 space-y-1 list-disc list-inside">
        <li>‡ß´‚Äì‡ßß‡ß¶ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡¶¨‡¶ø‡¶∂‡ßç‡¶∞‡¶æ‡¶Æ ‡¶®‡¶ø‡¶®, ‡¶ü‡¶æ‡¶á‡¶ü ‡¶ú‡¶æ‡¶Æ‡¶æ ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®‡•§</li>
        <li>‡¶™‡¶æ‡¶®‡¶ø/ORS ‡¶Ö‡¶≤‡ßç‡¶™ ‡¶Ö‡¶≤‡ßç‡¶™ ‡¶ï‡¶∞‡ßá ‡¶™‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</li>
        <li>‡¶¨‡ßç‡¶Ø‡¶•‡¶æ ‡¶¨‡¶æ‡¶°‡¶º‡¶≤‡ßá ‡¶®‡¶°‡¶º‡¶æ‡¶ö‡¶°‡¶º‡¶æ ‡¶ï‡¶Æ‡¶æ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ö‡¶æ‡¶®‡•§</li>
      </ul>
    </Card>
  );
}

function makeTabbedAdviceCard() {
  return (
    <Card key="tabs" title="Self-care ‚Ä¢ Tests ‚Ä¢ Diet">
      <div className="flex flex-wrap gap-2 mb-2">
        <Pill>Overview</Pill>
        <Pill>Tests</Pill>
        <Pill>Self-care</Pill>
        <Pill>Diet</Pill>
      </div>
      <div className="text-sm text-gray-700">
        <p className="mb-1">
          <span className="font-medium">Tests:</span> ECG, Troponin, CBC
          (‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßá)‡•§
        </p>
        <p className="mb-1">
          <span className="font-medium">Self-care:</span> ‡¶¨‡¶ø‡¶∂‡ßç‡¶∞‡¶æ‡¶Æ, ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞;
          OTC ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü‡¶æ‡¶∏‡¶ø‡¶° (‡¶°‡¶æ‡¶ï‡ßç‡¶§‡¶æ‡¶∞‡ßá‡¶∞ ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂‡ßá)‡•§
        </p>
        <p>
          <span className="font-medium">Diet:</span> ‡¶Æ‡¶∂‡¶≤‡¶æ‡¶¶‡¶æ‡¶∞/‡¶§‡ßá‡¶≤‡¶ö‡¶∞‡ßç‡¶¨‡¶ø ‡¶ï‡¶Æ, ‡¶¨‡ßá‡¶∂‡¶ø
          ‡¶™‡¶æ‡¶®‡¶ø‡•§
        </p>
      </div>
    </Card>
  );
}

function makeDoctorsCard() {
  return (
    <Card key="doctors" title="‡¶®‡¶ø‡¶ï‡¶ü‡¶∏‡ßç‡¶• ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û">
      <ul className="text-sm text-gray-800 space-y-2">
        <li className="p-2 rounded-lg border hover:bg-gray-50">
          <div className="font-medium">‡¶°‡¶æ. ‡¶®‡ßÅ‡¶∏‡¶∞‡¶æ‡¶§ ‡¶ú‡¶æ‡¶π‡¶æ‡¶® ‚Ä¢ ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡¶ø‡¶ì‡¶≤‡¶ú‡¶ø</div>
          <div className="text-gray-600">‡¶¨‡¶ø‡¶™‡¶ø ‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤ ‚Ä¢ ‡ßß.‡ß™ ‡¶ï‡¶ø‡¶Æ‡¶ø ‚Ä¢ ‚≠ê 4.8</div>
          <div className="mt-2 flex gap-2">
            <button className="px-3 py-1 rounded-lg bg-blue-700 text-white hover:bg-blue-800 text-xs">
              ‡¶¨‡ßÅ‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
            <button className="px-3 py-1 rounded-lg bg-gray-100 hover:bg-gray-200 text-xs">
              ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™
            </button>
          </div>
        </li>
        <li className="p-2 rounded-lg border hover:bg-gray-50">
          <div className="font-medium">‡¶°‡¶æ. ‡¶§‡¶æ‡¶®‡¶≠‡ßÄ‡¶∞ ‡¶π‡¶æ‡¶∏‡¶æ‡¶® ‚Ä¢ ‡¶Æ‡ßá‡¶°‡¶ø‡¶∏‡¶ø‡¶®</div>
          <div className="text-gray-600">
            ‡¶∏‡ßç‡¶ï‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤ ‚Ä¢ ‡ß®.‡ßß ‡¶ï‡¶ø‡¶Æ‡¶ø ‚Ä¢ ‚≠ê 4.6
          </div>
          <div className="mt-2 flex gap-2">
            <button className="px-3 py-1 rounded-lg bg-blue-700 text-white hover:bg-blue-800 text-xs">
              ‡¶¨‡ßÅ‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
            <button className="px-3 py-1 rounded-lg bg-gray-100 hover:bg-gray-200 text-xs">
              ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™
            </button>
          </div>
        </li>
      </ul>
    </Card>
  );
}
